




# 账号功能



## 校验规则

/login 返回登录页面
/doLogin 执行登录方法，检查账号密码，查询数据库信息，建立用户登录环境



```java
/*
用户名或一般字符串功能
前端需要做
1前端检查格式是否符合，不符合提示正确格式是什么
2是否已经使用，并带有提示功能，提示已经被占用

后端需要做
检查输入的值格式是否符合，不符合返回正确格式是什么
从数据库中查询数据，没查到返回用户名和密码不匹配
查询是否已经存在，已存在返回用户名已经被注册
检测查询到的数据是否符合规定，不符合返回用户信息错误，联系系统管理员
把用户信息存储在系统环境当中

*/

/*
密码功能
前端
检查格式是否符合，不符合返回正确的格式
加密之后传输


后端
检查格式
根据账号查询数据库的信息，不符合返回用户名和密码不匹配
比对与数据库的信息是否符合一致，不符合返回用户名和密码不匹配
通过加密算法或盐值来进行加密处理

*/








```


## 登录


```java

//Token 保存到服务器redis上
StringBuffer buffer = new StringBuffer();
String token = buffer.append("token:" + MD5.getMd5(username, 32) + Calendar.getInstance().getTimeInMillis().toString());
//把用户信息保存到redis中
RedisUtil.setValue(token, 7200, JSONArray.toJSONString(user));
//返回token信息
HashMap<String, String> map = new ManagedMap<>();
map.put("token", token);
return new Result(200, map, "登录成功");




@Component
public class LoginInterceptor implements HandlerInterceptor {
//从拦截器获取token信息
public boolean preHandle(HttpServletRequest request,
                        HttpServletResponse response,
                        Object handler) {
  String token = request.getParameter("token");
  String tokenValue = RedisUtil.getvalue(token);
  if (tokenValue != null) {return true;} 
  else {return false;}}
}






```


## 注册


```java



```



## 个人中心



```java



```



## 账号登出
/loginOut 注销的方法，修改环境信息，清空用户信息


```java



```








## 账号抹掉

```java


```







## 密码工具包



```java









```





# 权限系统


constants 设置环境变量的单词 const的原型
Constants.USER_SESSION 用户session常量


/login 用户不需要登录就能访问
/auth/loginOut 用户必须登录才能访问，拦截器会自动识别这样的路径

```java
//检测用户角色是否有这样的权限，没有返回403页面

```




































